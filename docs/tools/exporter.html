<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="shortcut icon" href="https://evekatsu.github.io/data/static/images/icon.png" type="image/png" />

    
    <title>Evekatsu Data</title>
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@evekatsu" />
    <meta name="twitter:title" content="Evekatsu Data" />
    <meta name="twitter:url" content="https://evekatsu.github.io/data" />
    <meta name="twitter:image:src" content="https://evekatsu.github.io/data/static/images/icon.png" />
    <meta name="twitter:description" content="Various data for EVE Online" />

    <meta property="og:type" content="website" />
    <meta property="og:title" content="Evekatsu Data" />
    <meta property="og:url" content="https://evekatsu.github.io/data" />
    <meta property="og:image" content="https://evekatsu.github.io/data/static/images/icon.png" />
    <meta property="og:description" content="Various data for EVE Online" />
    

    <style type="text/css">
    footer {
        padding: 4rem 0;
        color: #e9ecef;
        background-color: #343a40;
    }

    footer .copyright {
        padding-top: 1rem;
        padding-bottom: 1rem;
    }
    </style>
</head>

<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark static-top">
    <div class="container">
        <a class="navbar-brand" href="https://evekatsu.github.io/data">Evekatsu Data</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsEvekatsu" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsEvekatsu">
            <div class="navbar-nav mr-auto"></div>

            
            
        </div>
    </div>
</nav>
      
<!-- Page Content -->
<div class="container">
    
<div style="margin: 20px 0px">
    <h1 id="sitename">Categories</h1>
</div>        


<div class="form-group">
    <div id="categories" class="form-inline"></div>
</div>


<div id="version" style="margin-top: 50px; margin-bottom: 30px" class="text-center">
    <a href="https://cdn1.eveonline.com/data/sde/tranquility/sde-20190219-TRANQUILITY.zip">sde-20190219-TRANQUILITY</a>
</div>


<script>
window.onload = () => {
    const categories = document.getElementById("categories")

    getJson("https://evekatsu.github.io/data/types.json", (types) => {
        for (const key in types["categories"]) {
            const name = types["categories"][key]["name"]
            const checkboxDiv = document.createElement("div")
            const checkboxInput = document.createElement("input")
            const checkboxLabel = document.createElement("label")

            checkboxDiv.className = "form-check"
            checkboxDiv.style.margin = "5px 8px"
            //checkboxDiv.setAttribute("")

            checkboxInput.setAttribute("type", "form-check-input")
            checkboxInput.setAttribute("type", "checkbox")

            checkboxLabel.className = "form-check-label"
            checkboxLabel.setAttribute("for", name)
            checkboxLabel.innerHTML = "&nbsp;" + name

            checkboxDiv.appendChild(checkboxInput)
            checkboxDiv.appendChild(checkboxLabel)
            categories.appendChild(checkboxDiv)
            console.log("momomomo")
        }

        /*
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="clearCache" aria-describedby="optionsHelp">
            <label class="form-check-label" for="clearCache">Clear cache</label>
        </div>
        */
    })
}

const getJson = (url, func) => {
    var req = new XMLHttpRequest()
    req.onreadystatechange = () => {
        if (req.readyState == 4 && req.status == 200) {
            func(JSON.parse(req.responseText))
        }
    }
    req.open("GET", url, false)
    req.send(null)
}

const downloadCsv = () => {

}

/*
document.getElementById("downloadCsv").onclick = () => {
    var csv = []
    var table = document.getElementsByTagName("table")[0]

    var trs = table.getElementsByTagName("tr")
    for (var i = 0; i < trs.length; i++) {
        var tds = trs[i].getElementsByTagName("td")
        if (tds.length == 0) {
            continue
        }

        var columns = []
        for (var j = 0; j < tds.length; j++) {
            columns.push(tds[j].innerText.trim())
        }

        csv.push(columns)
    }

    var ths = table.getElementsByTagName("th")
    var headers = []
    for (var i = 0; i < ths.length; i++) {
        headers.push(ths[i].innerText.trim())
    }
    csv.unshift(headers)

    var csv_string = csv.map(row => {
        return row.map(str => {
            return '"' + (str ? str.replace(/"/g, '""') : '') + '"'
        })
    }).map(row => {
        return row.join(",")
    }).join("\n")

    var bom = '\uFEFF'
    var blob = new Blob([bom, csv_string], { type: "text/csv" })
    var name = document.getElementById("sitename")
    if (typeof name === 'undefined') {
        name = "download.csv"
    } else {
        name = name.innerText + ".csv"
    }
    var anchor = document.createElement("a")

    // ie
    if (window.navigator.msSaveBlob) {
        window.navigator.msSaveBlob(blob, name)
    // chrome, firefox, etc.
    } else if (window.URL && anchor.download !== undefined) {
        anchor.download = name
        anchor.href = window.URL.createObjectURL(blob)
        document.body.appendChild(anchor)
        anchor.click()
        anchor.parentNode.removeChild(anchor)
    } else {
        window.location.href = "data:attachment/csv;charset=utf-8," + encodeURIComponent(bom + data)
    }
}
*/
</script>

</div>

<footer class="small">
    <div class="container">
        <div class="row">
        <div class="col-12 text-center copyright">
            Â© 2019 Evekatsu
        </div>
        </div>
    </div>
</footer>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>